This document is to give a written tutorial on how to operate the Raspberry Pi's for Sign In and Sign Out
capabilities.  Each Pi can be configured to run either scenario and this document hopes to go over all possible scenarios.

For any additional questions about the Pi, please email Ramneek Chhatwal at rchhatw@g.clemson.edu.
For any additional questiosn about the deployment via CDK, please email Lake Summers at lakes@g.clemson.edu.

During Use:

Ensure that the Card Scanner is plugged in at all times the Raspberry Pi is running. Otherwise, you will need to restart the script.

Before First Use in Specific Location:

There are a couple of steps that need to be taken when setting up the Pi for the first time or moving to a new location.
  1)   Open the terminal and type:
            cd Desktop/CUmakeit_XX
       where XX is the number of the device (shown in the folder name on the desktop) [i.e. CUmakeit_01]

  2)   Decide if this device will be used for Sign In or Sign Out purposes.  Each device is equipped to handle either scenario,

  3a) If Sign In, type in the terminal
      cd SignIn

  3b) If SignOut, type in the terminal
      cd SignOut

  4) Verify that the Location is correct in the file start.sh by typing in the terminal
     nano start.sh
  and scrolling down to where there is the spot "Location: "
  Input the Location that the device will be in (THERE CANNOT BE ANY SPACES)

  When satisfied, press control + s to save the file and control + x to close out of the file.

  5) To run the script, type in the terminal
      ./start.sh



Running the Pi:
1)   Open the terminal and type:
          cd Desktop/CUmakeit_XX
     where XX is the number of the device (shown in the folder name on the desktop) [i.e. CUmakeit_01]

2)   Decide if this device will be used for Sign In or Sign Out purposes.  Each device is equipped to handle either scenario,

3a) If Sign In, type in the terminal
    cd SignIn

3b) If SignOut, type in the terminal
    cd SignOut

4) To run the script, type in the terminal
    ./start.sh


After a CDK Deploy:

At this point in time, a new CDK deploy will overwrite all of the keys and certificates for the devices.
They need to be manually added back in.

The steps are as follows (and I recommend using a USB drive and doing this on your own machine then moving back to the Pi):

1) In the AWS console, navigate to IoT Core. On the navigation bar on the left, you will be able to click
    Manage -> Things -> Pi # you are working on -> Security -> Certificate

    When you are on the page with the certificate, there will be an "Actions" drop down menu on the right. 
    CLick the drop down menu and download the certificate.

    You now have the certificate file for that Pi and you should move it to the certs folder in the Pi and rename the file to CertificateCUmakeit_XX.pem.crt 

2) In the AWS console, navigate to Secrets Manager.  You will then be able to access the Private Key for each specific Pi. 
    Click on the Number Pi that you are working on and scroll down to where you see "Secret Value" and the button to "Reveal Secret Value".
    Click on the "Reveal Secret Value" and copy all of the plain text version of the key

    Navigate to the PrivateKey for the device in the certs folder and replace the contents of PrivateKeyCUmakeit_XX.pem.key with the copied text

3) You can then move the contents back onto the Pi and replace the old certificate and key files with the new one