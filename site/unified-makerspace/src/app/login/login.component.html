<div class="center row h-100 w-100 no-gutters">
  <div class="card bg-primary col-xl-6 col-lg-8 col-12">

    <!--Login Form-->
    <div class="card-body" *ngIf="formType == 'login'">
      <h1 class="card-title text-light">Login</h1>
      <form [formGroup]="loginForm" (ngSubmit)="login()">
        <div class="form-group text-light">
          <label for="email"> Email </label
          ><input
          type="text"
          class="form-control"
          id="email"
          formControlName="email"
        />
        </div>

        <div class="form-group text-light mb-4">
          <label for="password"> Password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            formControlName="password"
            required
          />

          <a class="text-muted h6 mt-1">Forgot password?</a>
        </div>

        <button
          class="btn py-3 btn-secondary w-100 mb-2"
          type="submit"
          [ngClass]="{ disabled: registerForm.invalid }"
        >
          Login
        </button>
        <small class="text-warning font-weight-bold" *ngIf="errorMessage">{{
          errorMessage
          }}</small>
        <a class="text-muted mt-3 d-block" (click)="switchMode()"
        >Need an account?</a
        >
      </form>
    </div>

    <!--Register Form-->
    <div class="card-body" *ngIf="formType == 'register' && !success && !showVisitorForm">
      <h1 class="card-title text-light">Register</h1>
      <form [formGroup]="registerForm" (ngSubmit)="register()">


        <div class="form-group text-light">
          <label for="name">Name</label>
          <input id="name" type="text" name="name" class="form-control" formControlName="name" required>
          <small
            class="warning-label"
            *ngIf="showError('name')">
            {{showError('name')}}
          </small>
        </div>


        <div class="form-group text-light">
          <label for="new-email"> Email </label>
          <input
            type="text"
            class="form-control"
            id="new-email"
            formControlName="email"
            required
          />
          <small
            class="warning-label"
            *ngIf="showError('email')">
            {{showError('email')}}
          </small>
        </div>

        <div class="form-group text-light mb-3">
          <label for="new-password"> Password</label>
          <input
            type="password"
            class="form-control"
            id="new-password"
            formControlName="password"
            required
            #password
          />
          <small
            class="warning-label"
            *ngIf="showError('password')"
          >
            Required field.
          </small>
        </div>

        <div class="form-group text-light mb-4">
          <label for="confirm-password"> Confirm Password</label>
          <input
            type="password"
            class="form-control"
            id="confirm-password"
            formControlName="confirmPassword"
            required
            #newPassword
          />
          <small
            class="warning-label"
            *ngIf="!showError('confirmPassword') && password.value != newPassword.value"
          >
            Passwords do not match!
          </small>
          <small
            class="warning-label"
            *ngIf="showError('confirmPassword')"
          >
            {{showError('confirmPassword')}}
          </small>
        </div>

        <div [ngClass]="{'d-none': !registerMode}"
             class="form-group text-light mb-4" >
          <label for="user-token" class="font-weight-bold">Token
          <span class="pl-2 bi bi-question-circle"></span></label>
          <input
            type="text"
            class="form-control border-secondary border"
            id="user-token"
            formControlName="userToken"

          />
          <small
            class="warning-label"
            *ngIf="showError('userToken')"
          >
            Token is required. Contact your administrator for assistance.
          </small>
        </div>

        <div class="form-check text-light mb-3">
          <input id="is-user-or-visitor" type="checkbox" class="form-check-input"
                 formControlName="isUser" [(ngModel)]="registerMode">
          <label for="is-user-or-visitor" class="form-check-label">I work at the MakerSpace.</label>
        </div>

        <button
          class="btn py-3 btn-secondary w-100 mb-2"
          type="submit"
        >
          Register
        </button>
        <small class="text-warning font-weight-bold" *ngIf="errorMessage">{{
          errorMessage
          }}</small>
        <a class="text-muted mt-3 d-block" (click)="switchMode()"
        >Have an account?</a
        >
      </form>
    </div>


<!--     Visitor Form-->
    <div class="card-body" *ngIf="showVisitorForm">
      <form [formGroup]="visitorForm">
        <div class="row">
          <div class="form-group text-light col-6">
            <label for="major">Major</label>
            <input id="major" name="major" type="text"
                   list="majors" class="form-control"
                   formControlName="major">

            <datalist id="majors">
              <option class="form-control" value="{{major}}"
                      *ngFor="let major of majors">{{major}}</option>
            </datalist>
            <small
              class="warning-label"
              *ngIf="showError('major')">
              {{showError('major')}}
            </small>
          </div>

          <div class="form-group text-light col-6">
            <label for="degree">Degree</label>
            <input id="degree" type="text" class="form-control"
                   formControlName="degree">
            <small
              class="warning-label"
              *ngIf="showError('degree')">
              {{showError('degree')}}
            </small>
          </div>
        </div>

        <div class="form-group text-light">
          <label for="hardware-id">Hardware ID
          <span class="pl-2 bi-question-circle"></span></label>
          <input id="hardware-id" type="text" class="form-control"
                 formControlName="hardwareId">
          <small
            class="warning-label"
            *ngIf="showError('hardwareId')">
            {{showError('hardwareId')}}
          </small>
        </div>

      </form>
    </div>

    <!--Successful Registration-->
    <div class="card-body" *ngIf="success">
      <h1 class="card-title text-light">Success!</h1>
      <h2 class="card-title text-secondary">
        Check your email to confirm your account.
      </h2>
      <h4 class="text-light">
        If you can't find it, try checking your spam. The email was sent to
        <span class="a font-weight-bold">{{
          this.registerForm.get("email").value
          }}</span
        >.
      </h4>
    </div>
  </div>
</div>
